{% extends "layout.html" %}
{% block title %}TBot - Home{% endblock %}
{% block content %}
<h1 class="mb-4">Welcome, {{ session.name }}!</h1>

<!-- Tab Navigation -->
<ul class="nav nav-tabs" id="homeTab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="courses-tab" data-bs-toggle="tab" data-bs-target="#courses" type="button" role="tab" aria-controls="courses" aria-selected="true">Courses & Quizzes</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="scores-tab" data-bs-toggle="tab" data-bs-target="#scores" type="button" role="tab" aria-controls="scores" aria-selected="false">Your Scores</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="resources-tab" data-bs-toggle="tab" data-bs-target="#resources" type="button" role="tab" aria-controls="resources" aria-selected="false">Resources</button>
    </li>
</ul>

<!-- Tab Content -->
<div class="tab-content" id="homeTabContent">
    <!-- Courses & Quizzes Pane -->
    <div class="tab-pane fade show active" id="courses" role="tabpanel" aria-labelledby="courses-tab">
        <div class="card card-body border-top-0 rounded-0 rounded-bottom">
            <h3>HSC Information & Quizzes</h3>
            {% if hsc_info %}
                <div class="list-group">
					{% for course in courses %}
					<a href="{{ url_for('course_page', course_id_str=course.course_id_str) }}" class="list-group-item list-group-item-action">
						{{ course.title }}
					</a>
					{% endfor %}
				</div>
            {% else %}
                <p>No HSC information has been added yet.</p>
            {% endif %}
        </div>
    </div>

    <!-- Scores Pane -->
    <div class="tab-pane fade" id="scores" role="tabpanel" aria-labelledby="scores-tab">
        <div class="card card-body border-top-0 rounded-0 rounded-bottom">
            <h3>Your Quiz Scores</h3>
            <ul class="list-group list-group-flush">
            {% if marks %}
                {% for mark in marks %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ mark.course_id.replace('_', ' ')|title }}
                        <span class="badge bg-primary rounded-pill">{{ mark.score }} / {{ mark.total }}</span>
                    </li>
                {% endfor %}
            {% else %}
                <li class="list-group-item">You have not completed any quizzes yet.</li>
            {% endif %}
            </ul>
        </div>
    </div>

    <!-- Resources Pane -->
    <div class="tab-pane fade" id="resources" role="tabpanel" aria-labelledby="resources-tab">
        <div class="card card-body border-top-0 rounded-0 rounded-bottom">
            <h3>Student Resources</h3>
            <div class="list-group">
                {% for resource in resources %}
                <a href="{{ url_for('resource_page', slug=resource.slug) }}" class="list-group-item list-group-item-action">
                    {{ resource.title }}
                </a>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}